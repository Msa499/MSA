
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSA | Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #03001C;
            --primary-color: #301E67;
            --secondary-color: #5B8FB9;
            --accent-color: #B6EADA;
            --glow-color: #00f2ea;
            --error-color: #ff4d4d;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg-color);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.5;
        }

        .form-container {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0, 242, 234, 0.3);
            width: 350px;
            text-align: center;
            border: 1px solid var(--primary-color);
            transition: all 0.5s ease;
        }

        .form-container h2 {
            margin-bottom: 20px;
            color: var(--accent-color);
            font-size: 2rem;
            text-shadow: 0 0 10px var(--glow-color);
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            background-color: rgba(48, 30, 103, 0.3);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: var(--glow-color);
            box-shadow: 0 0 15px var(--glow-color);
        }
        
        .input-group .feedback {
            font-size: 0.8rem;
            text-align: right;
            padding-right: 5px;
            margin-top: 5px;
            display: none; /* Hidden by default */
        }
        
        #password-strength-bar {
            width: 100%;
            height: 5px;
            background: #333;
            border-radius: 5px;
            margin-top: 5px;
        }
        #password-strength-progress {
            height: 100%;
            background: var(--error-color);
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        button.primary-btn {
            width: 100%; padding: 12px; border: none; border-radius: 8px;
            background-color: var(--accent-color); color: var(--bg-color);
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
            transition: all 0.3s ease;
        }
        button.primary-btn:hover {
            box-shadow: 0 0 20px var(--glow-color);
        }

        .divider {
            display: flex; align-items: center; text-align: center; color: #777; margin: 20px 0;
        }
        .divider::before, .divider::after {
            content: ''; flex: 1; border-bottom: 1px solid var(--primary-color);
        }
        .divider:not(:empty)::before { margin-left: .25em; }
        .divider:not(:empty)::after { margin-right: .25em; }

        .social-login button {
            width: 100%; display: flex; align-items: center; justify-content: center;
            padding: 10px; border-radius: 8px; border: 1px solid var(--primary-color);
            background: transparent; color: white; font-size: 1rem; cursor: pointer;
            margin-bottom: 10px; transition: background-color 0.3s ease;
        }
        .social-login button img { width: 20px; margin-left: 10px; }
        .social-login button:hover { background-color: var(--primary-color); }

        .link { margin-top: 20px; font-size: 0.9rem; }
        .link a { color: var(--accent-color); text-decoration: none; }
        
        /* Welcome Back Message */
        #welcome-back { text-align: center; }
        #welcome-back p { font-size: 1.2rem; margin-bottom: 20px; }
        
        /* Social Login Simulation Modal */
        #social-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(5px);
            display: none; justify-content: center; align-items: center; z-index: 100;
        }
        .modal-content {
            background: var(--bg-color); padding: 30px; border-radius: 15px;
            border: 1px solid var(--accent-color); text-align: center;
        }
        .modal-content p { margin-bottom: 20px; font-size: 1.2rem; }

    </style>
</head>
<body>
    <canvas id="bg-canvas"></canvas>

    <div class="form-container" id="registration-container">
        </div>
    
    <div id="social-modal">
        <div class="modal-content">
            <p id="modal-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</p>
            <button class="primary-btn" id="modal-confirm-btn">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø§Ø³Ù… MSA User</button>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- AI Feature: Remember User & Personalize ---
            const registrationContainer = document.getElementById('registration-container');
            const loggedInUser = JSON.parse(localStorage.getItem('msaUser'));

            if (loggedInUser) {
                showWelcomeBack(loggedInUser.name);
            } else {
                showRegistrationForm();
            }

            function showWelcomeBack(name) {
                registrationContainer.innerHTML = `
                    <div id="welcome-back">
                        <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ø¹ÙˆØ¯ØªÙƒØŒ ${name}!</h2>
                        <p>ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ Ù‚Ù…Øª Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ù„ÙØ¹Ù„.</p>
                        <button class="primary-btn" onclick="proceedToApp()">Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ</button>
                    </div>`;
            }

            function proceedToApp() {
                window.location.href = 'second.html';
            }
            // Make function global to be accessible by onclick
            window.proceedToApp = proceedToApp;

            function showRegistrationForm() {
                registrationContainer.innerHTML = `
                    <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                    <form id="registrationForm" onsubmit="event.preventDefault(); validateForm();">
                        <div class="input-group">
                            <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required />
                        </div>
                        <div class="input-group">
                            <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required />
                            <div class="feedback" id="email-feedback"></div>
                        </div>
                        <div class="input-group">
                            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required />
                            <div id="password-strength-bar"><div id="password-strength-progress"></div></div>
                            <div class="feedback" id="password-feedback"></div>
                        </div>
                        <button type="submit" class="primary-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
                    </form>
                    <div class="divider">Ø£Ùˆ</div>
                    <div class="social-login">
                        <button onclick="simulateSocialLogin('Google')"><img src="https://api.iconify.design/logos:google-icon.svg"> Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬ÙˆØ¬Ù„</button>
                        <button onclick="simulateSocialLogin('Facebook')"><img src="https://api.iconify.design/logos:facebook.svg"> Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠØ³Ø¨ÙˆÙƒ</button>
                    </div>
                    <div class="link">
                        <span>Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a href="#">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></span>
                    </div>`;

                // Add event listeners for smart validation
                const emailInput = document.getElementById('email');
                const passwordInput = document.getElementById('password');
                emailInput.addEventListener('input', validateEmailRealtime);
                passwordInput.addEventListener('input', checkPasswordStrength);
            }
            
            // --- AI Feature: Smart Form Validation ---
            function validateEmailRealtime() {
                const email = document.getElementById('email').value.trim();
                const feedback = document.getElementById('email-feedback');
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                feedback.style.display = 'block';
                if (emailRegex.test(email)) {
                    feedback.textContent = 'Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ§Ù„Ø­ âœ”ï¸';
                    feedback.style.color = 'var(--accent-color)';
                } else if (email.length > 0) {
                    feedback.textContent = 'ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                    feedback.style.color = 'var(--error-color)';
                } else {
                    feedback.style.display = 'none';
                }
            }

            function checkPasswordStrength() {
                const password = document.getElementById('password').value;
                const progress = document.getElementById('password-strength-progress');
                const feedback = document.getElementById('password-feedback');
                let strength = 0;
                
                if (password.length >= 8) strength++;
                if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
                if (password.match(/[0-9]/)) strength++;
                if (password.match(/[^a-zA-Z0-9]/)) strength++;

                feedback.style.display = 'block';
                switch (strength) {
                    case 0:
                    case 1:
                        progress.style.width = '25%';
                        progress.style.backgroundColor = 'var(--error-color)';
                        feedback.textContent = 'Ø¶Ø¹ÙŠÙØ© Ø¬Ø¯Ù‹Ø§';
                        feedback.style.color = 'var(--error-color)';
                        break;
                    case 2:
                        progress.style.width = '50%';
                        progress.style.backgroundColor = 'orange';
                        feedback.textContent = 'Ù…ØªÙˆØ³Ø·Ø©';
                        feedback.style.color = 'orange';
                        break;
                    case 3:
                        progress.style.width = '75%';
                        progress.style.backgroundColor = 'yellow';
                        feedback.textContent = 'Ù‚ÙˆÙŠØ©';
                        feedback.style.color = 'yellow';
                        break;
                    case 4:
                        progress.style.width = '100%';
                        progress.style.backgroundColor = 'var(--accent-color)';
                        feedback.textContent = 'Ù‚ÙˆÙŠØ© Ø¬Ø¯Ù‹Ø§ ğŸ’ª';
                        feedback.style.color = 'var(--accent-color)';
                        break;
                }
            }

            // --- Main Registration Logic ---
            function validateForm() {
                const name = document.getElementById('name').value.trim();
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value;
                
                // Simple checks, more can be added
                if (!name || !email || !password) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
                    return;
                }
                if (password.length < 8) {
                    alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
                    return;
                }

                // Save and Redirect
                const user = { name, email };
                localStorage.setItem('msaUser', JSON.stringify(user));
                window.location.href = 'second.html';
            }
            window.validateForm = validateForm;

            // --- AI Feature: Realistic Social Login Simulation ---
            function simulateSocialLogin(provider) {
                const modal = document.getElementById('social-modal');
                const modalText = document.getElementById('modal-text');
                const confirmBtn = document.getElementById('modal-confirm-btn');
                
                modalText.textContent = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© Ù…Ø¹ ${provider}...`;
                modal.style.display = 'flex';
                
                // Simulate API call delay
                setTimeout(() => {
                    modalText.textContent = `Ù‡Ù„ ØªØ³Ù…Ø­ Ù„Ù€ MSA Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨ ${provider} Ø§Ù„Ø®Ø§Øµ Ø¨ÙƒØŸ`;
                    confirmBtn.style.display = 'block';
                    confirmBtn.onclick = () => {
                        const user = { name: `${provider} User`, email: `user@${provider.toLowerCase()}.com` };
                        localStorage.setItem('msaUser', JSON.stringify(user));
                        window.location.href = 'second.html';
                    };
                }, 1500);
            }
            window.simulateSocialLogin = simulateSocialLogin;
            
            // Background Animation
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight); camera.position.z = 5;
            const particlesGeometry = new THREE.BufferGeometry; const particlesCount = 2000;
            const posArray = new Float32Array(particlesCount * 3);
            for (let i = 0; i < particlesCount * 3; i++) { posArray[i] = (Math.random() - 0.5) * 10; }
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMaterial = new THREE.PointsMaterial({ size: 0.01, color: 0xB6EADA });
            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial); scene.add(particlesMesh);
            const animate = () => { particlesMesh.rotation.y += 0.0005; particlesMesh.rotation.x += 0.0005; renderer.render(scene, camera); requestAnimationFrame(animate); };
            animate();
        });
    </script>
</body>
</html>
